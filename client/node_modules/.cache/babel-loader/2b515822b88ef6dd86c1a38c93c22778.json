{"ast":null,"code":"var _jsxFileName = \"/home/devuser/Tech_Lead/client/src/pages/Product/Product.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport Card from \"components/Card/Card\";\nimport { default as Container } from \"components/Container/Container\";\nimport Pagination from \"components/Pagination/Pagination\";\nimport { getProducts, deleteProduct } from \"helpers/product.helper\";\nimport { paginate } from \"utils/paginate\";\nimport NavBar from \"components/NavBar/NavBar\";\nimport { InputLabel, MenuItem, FormControl, Select } from \"@mui/material\";\nimport { toast } from \"react-toastify\";\nimport { Categories } from \"constants/index\";\nimport useStyles from \"./Product.styles.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Product() {\n  _s();\n\n  const classes = useStyles();\n  const [products, setProducts] = React.useState([]);\n  const [searchParams, setSearchParams] = React.useState(\"\");\n  const [currentPage, setCurrentPage] = React.useState(1); // eslint-disable-next-line no-unused-vars\n\n  const [pageSize, setPageSize] = React.useState(0);\n  const [selectedCategory, setSelectedCategory] = React.useState({\n    title: \"\"\n  });\n  React.useEffect(() => {\n    async function fetchData() {\n      const data = await loadProducts();\n      setProducts(data);\n    }\n\n    fetchData();\n  }, []);\n\n  const loadProducts = async () => {\n    const result = await getProducts();\n    setPageSize(4);\n    return result.data;\n  };\n\n  const handleDelete = async product => {\n    const originalProducts = await loadProducts();\n    const products = originalProducts.filter(p => p._id !== product._id);\n    setProducts(products);\n\n    try {\n      await deleteProduct(product._id); // show toast notification of success\n\n      toast.success(\"Product Deleted\");\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) toast.error(ex.response.data);\n      setProducts(originalProducts);\n    }\n  };\n\n  const handleCategorySelect = _ref => {\n    let {\n      target\n    } = _ref;\n    setSelectedCategory({\n      title: target.value\n    });\n    setCurrentPage(1);\n  };\n\n  const handlePageChange = page => {\n    setCurrentPage(page);\n  };\n\n  const getPagedData = () => {\n    const allProducts = products;\n    let filtered = allProducts;\n\n    if (selectedCategory && selectedCategory.title) {\n      filtered = allProducts.filter(m => m.category === selectedCategory.title);\n    }\n\n    let sorted = filtered;\n\n    if (searchParams !== \"\") {\n      sorted = allProducts.filter(product => {\n        let productLowerCase = product.title.toLowerCase();\n        let searchTermLowercase = searchParams.toLowerCase();\n        return productLowerCase.indexOf(searchTermLowercase) > -1;\n      });\n    }\n\n    const filterProductList = paginate(sorted, currentPage, pageSize);\n    return {\n      totalCount: filtered.length,\n      data: filterProductList\n    };\n  };\n\n  const {\n    totalCount,\n    data: filteredProducts\n  } = getPagedData();\n  const paginationData = {\n    count: totalCount,\n    pageSize,\n    currentPage,\n    onPageChange: handlePageChange\n  };\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      searchParams: searchParams,\n      setSearchParams: setSearchParams\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: \"demo-simple-select-label\",\n          children: \"Filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"demo-simple-select-label\",\n          id: \"demo-simple-select\",\n          value: selectedCategory.title,\n          label: \"Category\",\n          onChange: handleCategorySelect,\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"\",\n            children: /*#__PURE__*/_jsxDEV(\"em\", {\n              children: \"None\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), Categories.map((item, index) => {\n            return /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: item.name,\n              children: item.name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: {\n          xs: 2,\n          md: 3\n        },\n        columns: {\n          xs: 2,\n          sm: 8,\n          md: 12\n        },\n        className: classes.grid,\n        children: filteredProducts.map((product, index) => /*#__PURE__*/_jsxDEV(Card, {\n          handleDelete: handleDelete,\n          product: product\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        pageData: paginationData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Product, \"3XBr6JgiADIOQaLtBGc3wiq5SpA=\", false, function () {\n  return [useStyles];\n});\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["/home/devuser/Tech_Lead/client/src/pages/Product/Product.jsx"],"names":["React","Grid","Card","default","Container","Pagination","getProducts","deleteProduct","paginate","NavBar","InputLabel","MenuItem","FormControl","Select","toast","Categories","useStyles","Product","classes","products","setProducts","useState","searchParams","setSearchParams","currentPage","setCurrentPage","pageSize","setPageSize","selectedCategory","setSelectedCategory","title","useEffect","fetchData","data","loadProducts","result","handleDelete","product","originalProducts","filter","p","_id","success","ex","response","status","error","handleCategorySelect","target","value","handlePageChange","page","getPagedData","allProducts","filtered","m","category","sorted","productLowerCase","toLowerCase","searchTermLowercase","indexOf","filterProductList","totalCount","length","filteredProducts","paginationData","count","onPageChange","map","item","index","name","xs","md","sm","grid"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport Card from \"components/Card/Card\";\nimport { default as Container } from \"components/Container/Container\";\nimport Pagination from \"components/Pagination/Pagination\";\nimport { getProducts, deleteProduct } from \"helpers/product.helper\";\nimport { paginate } from \"utils/paginate\";\nimport NavBar from \"components/NavBar/NavBar\";\nimport { InputLabel, MenuItem, FormControl, Select } from \"@mui/material\";\nimport { toast } from \"react-toastify\";\nimport { Categories } from \"constants/index\";\n\nimport useStyles from \"./Product.styles.js\";\n\nfunction Product() {\n  const classes = useStyles();\n\n  const [products, setProducts] = React.useState([]);\n  const [searchParams, setSearchParams] = React.useState(\"\");\n  const [currentPage, setCurrentPage] = React.useState(1);\n  // eslint-disable-next-line no-unused-vars\n  const [pageSize, setPageSize] = React.useState(0);\n  const [selectedCategory, setSelectedCategory] = React.useState({\n    title: \"\",\n  });\n\n  React.useEffect(() => {\n    async function fetchData() {\n      const data = await loadProducts();\n      setProducts(data);\n    }\n    fetchData();\n  }, []);\n\n  const loadProducts = async () => {\n    const result = await getProducts();\n    setPageSize(4);\n\n    return result.data;\n  };\n\n  const handleDelete = async (product) => {\n    const originalProducts = await loadProducts();\n    const products = originalProducts.filter((p) => p._id !== product._id);\n    setProducts(products);\n\n    try {\n      await deleteProduct(product._id);\n      // show toast notification of success\n      toast.success(\"Product Deleted\");\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400)\n        toast.error(ex.response.data);\n\n      setProducts(originalProducts);\n    }\n  };\n\n  const handleCategorySelect = ({ target }) => {\n    setSelectedCategory({\n      title: target.value,\n    });\n    setCurrentPage(1);\n  };\n\n  const handlePageChange = (page) => {\n    setCurrentPage(page);\n  };\n\n  const getPagedData = () => {\n    const allProducts = products;\n    let filtered = allProducts;\n\n    if (selectedCategory && selectedCategory.title) {\n      filtered = allProducts.filter(\n        (m) => m.category === selectedCategory.title\n      );\n    }\n\n    let sorted = filtered;\n\n    if (searchParams !== \"\") {\n      sorted = allProducts.filter((product) => {\n        let productLowerCase = product.title.toLowerCase();\n        let searchTermLowercase = searchParams.toLowerCase();\n        return productLowerCase.indexOf(searchTermLowercase) > -1;\n      });\n    }\n\n    const filterProductList = paginate(sorted, currentPage, pageSize);\n\n    return { totalCount: filtered.length, data: filterProductList };\n  };\n\n  const { totalCount, data: filteredProducts } = getPagedData();\n\n  const paginationData = {\n    count: totalCount,\n    pageSize,\n    currentPage,\n    onPageChange: handlePageChange,\n  };\n\n  return (\n    <React.Fragment>\n      <NavBar searchParams={searchParams} setSearchParams={setSearchParams} />\n      <Container>\n        <br />\n        <FormControl fullWidth>\n          <InputLabel id=\"demo-simple-select-label\">Filter</InputLabel>\n          <Select\n            labelId=\"demo-simple-select-label\"\n            id=\"demo-simple-select\"\n            value={selectedCategory.title}\n            label=\"Category\"\n            onChange={handleCategorySelect}\n          >\n            <MenuItem value=\"\">\n              <em>None</em>\n            </MenuItem>\n            {Categories.map((item, index) => {\n              return (\n                <MenuItem key={index} value={item.name}>\n                  {item.name}\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n        <br />\n        <br />\n        <Grid\n          container\n          spacing={{ xs: 2, md: 3 }}\n          columns={{ xs: 2, sm: 8, md: 12 }}\n          className={classes.grid}\n        >\n          {filteredProducts.map((product, index) => (\n            <Card handleDelete={handleDelete} product={product} key={index} />\n          ))}\n        </Grid>\n        <br />\n        <Pagination pageData={paginationData} />\n        <br />\n      </Container>\n    </React.Fragment>\n  );\n}\n\nexport default Product;\n"]},"metadata":{},"sourceType":"module"}